{extend name="../resources/views/layouts/layout.html" /}
{block name="title"}
    更新个人资料
{/block}
{block name="content"}
    <div class="container">
        <div class="offset-md-2 col-md-8">
            <div class="card">
                <div class="card-header">
                    <h4>
                        <i class="glyphicon glyphicon-edit"></i> 编辑个人资料
                    </h4>
                </div>

                <div class="card-body">
                    {include file="../resources/views/shared/_error.html"}

                    <form method="POST" action="{:url('users.update', ['id'=>$user->id])}" accept-charset="UTF-8" enctype="multipart/form-data">
                        <input type="hidden" name="_method" value="PATCH" >
                        {:token()}

                        <div class="form-group">
                            <label for="name">{:lang('Name')}</label>
                            <input type="text" name="name" id="name" class="form-control" value="{:old('name') ?: $user->name}">
                        </div>

                        <div class="form-group">
                            <label for="email">{:lang('E-Mail Address')}</label>
                            <input type="text" name="email" id="email" class="form-control" value="{$user->email}" readonly="readonly">
                        </div>

                        <div class="form-group">
                            <label for="introduction">{:lang('Introduction')}</label>
                            <textarea name="introduction" id="introduction" class="form-control" rows="3">{:old('introduction') ?: $user->introduction}</textarea>
                        </div>

                        <div class="form-group mb-4">
                            <label for="" class="avatar-label">{:lang('Avatar')}</label>
                            <input type="file" name="avatar" id="avatar" class="form-control-file">

                            {if $user->avatar}
                                <br>
                                <img class="thumbnail img-responsive" src="{$user->avatar}" width="200">
                            {/if}
                        </div>

                        <div class="well well-sm">
                            <button type="submit" class="btn btn-primary">
                                {:lang('Save')}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{/block}
